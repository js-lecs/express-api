{"version":3,"sources":["webpack:///webpack/bootstrap b7f7172d7518d1dd62e2","webpack:///external \"express\"","webpack:///external \"mongoose\"","webpack:///./src/config.js","webpack:///external \"jsonwebtoken\"","webpack:///./src/index.js","webpack:///./src/models/user.model.js","webpack:///./src/models/wizard.model.js","webpack:///./src/routes/user.route.js","webpack:///./src/routes/wizard.route.js","webpack:///external \"body-parser\""],"names":["CONFIG","app","express","use","bodyParser","urlencoded","extended","json","set","mongoose","connect","get","req","res","render","title","next","token","body","query","headers","jwt","verify","secret","err","decoded","status","success","message","send","listen","console","log","require","Schema","User","model","name","String","password","admin","Boolean","wizard","house","pet","Wizard","router","Router","post","user","save","data","findOne","sign","expiresIn","USER_ROUTES","find","wizards","findById","params","id","put","delete","remove","_id","WizardRoutes"],"mappings":"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","file":"bundle.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// identity function for calling harmony imports with the correct context\n \t__webpack_require__.i = function(value) { return value; };\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 10);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap b7f7172d7518d1dd62e2","module.exports = require(\"express\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"express\"\n// module id = 0\n// module chunks = 0","module.exports = require(\"mongoose\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"mongoose\"\n// module id = 1\n// module chunks = 0","export const CONFIG = {\n    'secret': 'vengardiunLaviosa'\n};\n\n\n// WEBPACK FOOTER //\n// ./src/config.js","module.exports = require(\"jsonwebtoken\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"jsonwebtoken\"\n// module id = 3\n// module chunks = 0","import express from 'express';\nimport bodyParser from 'body-parser';\nimport { WizardRoutes } from './routes/wizard.route';\nimport mongoose from 'mongoose';\n\nimport jwt from 'jsonwebtoken'; // used to create, sign, and verify tokens\nimport { CONFIG } from './config';\nimport { USER_ROUTES } from './routes/user.route';\n\n// application initialization\nlet app = express();\n\n// enables POST, PUT Body data to be retrieved as JSON\napp.use(bodyParser.urlencoded({ extended: true }));\napp.use(bodyParser.json());\n\n\n// application port\napp.set('port', 3000);\n\n\n// connect to mongoDB instance created on mongoLAbs\n\nmongoose.connect('mongodb://root:root@ds133311.mlab.com:33311/hogwarts');\n\n// setup viewengine\napp.set('views', 'src/views');\napp.set('view engine', 'pug');\n\n\n\n\napp.get('/', (req, res) => {\n    res.render('hello', { title: 'Home' });\n});\n\n// route middleware to verify a token\napp.use('/wizard', function (req, res, next) {\n\n    // check header or url parameters or post parameters for token\n    var token = req.body.token || req.query.token || req.headers['x-access-token'];\n\n    // decode token\n    if (token) {\n        // verifies secret and checks exp\n        jwt.verify(token, CONFIG.secret, function (err, decoded) {\n            if (err) {\n                return res.status(401).json({ success: false, message: 'Failed to authenticate token.' });\n            } else {\n                // if everything is good, save to request for use in other routes\n                req.decoded = decoded;\n                next();\n            }\n        });\n    } else {\n        // if there is no token\n        // return an error\n        return res.status(403).send({\n            success: false,\n            message: 'No token provided.'\n        });\n    }\n});\n\napp.use(USER_ROUTES);\napp.use('/wizard', WizardRoutes);\n\n\napp.listen(app.get('port'), () => {\n    console.log(`Node is running on port  ${app.get('port')}`);\n});\n\n\n// WEBPACK FOOTER //\n// ./src/index.js","// get an instance of mongoose and mongoose.Schema\nvar mongoose = require('mongoose');\nvar Schema = mongoose.Schema;\n\n// set up a mongoose model and pass it using module.exports\nexport const User = mongoose.model('User', new Schema({\n    name: String,\n    password: String,\n    admin: Boolean\n}));\n\n\n// WEBPACK FOOTER //\n// ./src/models/user.model.js","import mongoose from 'mongoose';\n\nlet Schema = mongoose.Schema;\n\n\nlet wizard = new Schema({\n    name: String,\n    house: String,\n    pet: String\n});\n\n\nexport const Wizard = mongoose.model('Wizard', wizard);\n\n\n// WEBPACK FOOTER //\n// ./src/models/wizard.model.js","import express from 'express';\nimport { User } from '../models/user.model';\nimport { CONFIG } from '../config';\nimport jwt from 'jsonwebtoken'; // used to create, sign, and verify tokens\nlet router = express.Router();\n\n\nrouter.post('/register', (req, res) => {\n    var user = new User({\n        name: req.body.name,\n        password: req.body.password,\n        admin: req.body.admin\n    });\n    user.save((err, data) => {\n        if (err)\n            res.status(400).send(err);\n        res.json({\n            status: \"success\",\n            data: data\n        })\n    });\n});\n\n\nrouter.get('/authenticate', (req, res) => {\n\n\n    User.findOne({\n        name: req.query.name\n    }, (err, user) => {\n        if (err)\n            res.status(400).json({ success: false, message: 'Authentication failed. Server Error.' });\n\n        if (!user) {\n\n            res.status(400).json({ success: false, message: 'Authentication failed. Username wrong123.' });\n        } else {\n            if (user.password !== req.query.password) {\n                res.status(400).json({ success: false, message: 'Authentication failed. Password wrong.' });\n            } else {\n                // if user is found and password is right\n                // create a token\n                var token = jwt.sign(user, CONFIG.secret, {\n                    expiresIn: 1440 // expires in 24 hours\n                });\n\n                // return the information including token as JSON\n                res.json({\n                    success: true,\n                    message: 'Enjoy your token!',\n                    token: token\n                });\n            }\n        }\n    });\n});\n\n\nexport const USER_ROUTES = router;\n\n\n// WEBPACK FOOTER //\n// ./src/routes/user.route.js","import express from 'express';\nimport { Wizard } from '../models/wizard.model';\n\nlet router = express.Router();\n\n\n// get all wizards\nrouter.get('/', (req, res) => {\n    Wizard.find((err, wizards) => {\n        if (err)\n            res.send(err);\n\n        res.json({ data: wizards, decoded: req.decoded });\n    });\n});\n\n// add wizard\nrouter.post('/', (req, res) => {\n\n    let wizard = new Wizard();\n    wizard.name = req.body.name;\n    wizard.house = req.body.house;\n    wizard.pet = req.body.pet;\n\n    wizard.save((err, data) => {\n        if (err)\n            res.send(err);\n\n        res.json({\n            message: \"Wizard added successfully!\",\n            data: data\n        })\n    });\n});\n\n\n// view wizard from ID\nrouter.get('/:id', (req, res) => {\n    Wizard.findById(req.params.id, (err, wizard) => {\n        if (err)\n            res.send(err);\n        res.json(wizard);\n    });\n});\n\n\n// Edit wizard from ID\nrouter.put('/:id', (req, res) => {\n    Wizard.findById(req.params.id, (err, wizard) => {\n        if (err)\n            res.send(err);\n\n        wizard.name = req.body.name;\n        wizard.house = req.body.house;\n        wizard.pet = req.body.pet;\n\n        wizard.save((err, data) => {\n            if (err)\n                res.send(err);\n\n            res.json({\n                message: \"updated successfully\",\n                data: data\n            });\n        })\n    });\n});\n\n// Delete wizard from ID\nrouter.delete('/:id', (req, res) => {\n    Wizard.remove({\n        _id: req.params.id\n    }, (err, data) => {\n        if (err)\n            res.send(err);\n\n        res.json({\n            \"message\": \"Deleted Successfully\",\n            data: data\n        })\n    });\n});\n\nexport const WizardRoutes = router;\n\n\n// WEBPACK FOOTER //\n// ./src/routes/wizard.route.js","module.exports = require(\"body-parser\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"body-parser\"\n// module id = 9\n// module chunks = 0"],"sourceRoot":""}